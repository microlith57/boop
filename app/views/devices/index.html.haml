%h1 Devices
= render 'home/menu'
= pagy_nav @pagy
%table
  %thead
    %tr
      %th= sort_link @query, :name
      %th= sort_link @query, :barcode
      %th= sort_link @query, :created_at, 'Time Created'
      %th= sort_link @query, :issued_at, 'Time Issued'
      %th Days Overdue
  %tbody
    - @devices.each do |device|
      %tr
        - if device.overdue?
          %td= link_to device.name, device, class: 'overdue'
        - else
          %td= link_to device.name, device

        %td
          %pre= device.barcode

        %td= local_time device.created_at

        - if device.issued?
          %td= local_time device.issued_at
        - else
          %td -

        - if device.overdue?
          %td= device.days_overdue
        - else
          %td -
= pagy_nav @pagy
